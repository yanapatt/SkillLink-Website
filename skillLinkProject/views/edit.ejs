<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Post Reviews</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
   body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f5f5f5;
}
.navbar-container {
    background: black;
    padding: 10px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin: auto;
  } 

  .navbar-left {
    display: flex;
    align-items: center;
    gap: 15px;
    
  }

  .navbar-left a {
    color: white;
    text-decoration: none;
  }
  .btn{
    background-color: rgb(0, 0, 0);
    color: white;
    border: 2px solid white;
    border-radius: 20px;
    padding: 10px 20px;
    font-size: 16px;
    outline: none;
    box-sizing: border-box;
    transition: all 0.3s ease;
  }
  .btn:hover {
    background-color: rgb(250, 250, 250); /* เปลี่ยนพื้นหลังเป็นสีดำเมื่อวางเมาส์ */
    color: black; /* เปลี่ยนสีข้อความเป็นขาวเมื่อวางเมาส์ */
    border: 2px solid white; /* เปลี่ยนเส้นขอบเป็นสีขาวเมื่อวางเมาส์ */
}
  
.search-section {
    text-align: center;
    padding: 40px;
    background-color: white;
}
.search-box {
    padding: 10px;
    width: 300px;
    border-radius: 20px;
    border: 1px solid gray;
}
.volunteer-section {
    display: flex;
    justify-content: center;
    margin: 20px;
    color: black;
   
}
.volunteer-section a {
    color: black ;  /* ใช้สีปกติของข้อความ */
    text-decoration: none;  /* ลบเส้นใต้ */
    
  }
.volunteer-list {
  width: 60%;
    background-color: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    text-align: center;
    display: flex; /* จัดให้อยู่ตรงกลาง */
    flex-direction: column;
    align-items: center;
}
.volunteer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid #ddd;
    padding: 1px 0;
}
.volunteer img {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    margin-right: 15px;
}
.volunteer-info {
    display: flex;
    flex-direction: column;  
    justify-content: center;  /* จัดรายการให้อยู่กลางในแนวนอน */
    align-items: center;      /* จัดรายการให้อยู่กลางในแนวตั้ง */
}
.volunteer-info ul {
  list-style-type: none;
    padding-left: 0;
    width: 100%;
    text-align: center; /* ทำให้ข้อความอยู่ตรงกลาง */
}

.volunteer-info li {
  display: flex;
    flex-direction: column;
    align-items: center; /* ทำให้เนื้อหาอยู่ตรงกลาง */
    width: 100%;
    margin: 10px 0;
}
.sidebar {
    width: 30%;
    background-color: black;
    color: white;
    text-align: center;
    padding: 40px;
    border-radius: 10px;
    margin-left: 20px;
}
.sidebar2 {
    width: 20%;
    min-width: 200px;  /* กำหนดความกว้างขั้นต่ำ */
    max-width: 400px;  /* กำหนดความกว้างสูงสุด */
    height: 60vh;
    background-color: black;
    color: white;
    text-align: center;
    padding: 50px;
    border-radius: 10px;
    margin-left: 20px;
}

.btn2 {
    background-color: white;
    color: black;
    border-radius: 10px;
    
    border: 2px solid black;
    padding: 10px 20px;
    transition: all 0.3s ease;
}
.btn2:hover {
    background-color: white; /* เปลี่ยนพื้นหลังเป็นสีดำเมื่อวางเมาส์ */
    color: black; /* เปลี่ยนสีข้อความเป็นขาวเมื่อวางเมาส์ */
    border: 2px solid rgb(245, 243, 244); /* เปลี่ยนเส้นขอบเป็นสีขาวเมื่อวางเมาส์ */
}

.textarea {
    width: 1000px;
    height: 400px;
    border-radius: 20px; /* มุมโค้งเล็กลงให้เห็นชัด */
    padding: 10px;
    border: 1px solid #ccc;
}
.input-text,.textarea{
    width: 1000px;
    height: 80px;
    border-radius: 20px; /* มุมโค้งเล็กลงให้เห็นชัด */
    padding: 10px;
    border: 1px solid #ccc;
}
.container{
    max-width: 900px;
    margin:20px auto 0 auto;
    background-color: white;
    padding: 20px;
    border-radius: 10px;
    border: 2px solid black;
}
.post{
    background-color: white;
    padding: 15px;
    border-radius: 10px;
    margin: 10px 0;
    display: flex;
    align-items: center;
    border: 2px solid black;
}
.post img {
    width: 100px;
    height: 100px;
    background: black;
    border-radius: 10px;
    margin-right: 15px;
}
.pagination {
    display: flex;
    justify-content:right;
    margin-top: 20px;
}
.profile-pic {
    width: 100px;
    height: 100px;
    background: black;
    border-radius: 50%;
    margin: 0 auto;
}
.stars {
    color: gold;
    cursor: pointer;
}
.container5 {
    max-width: 600px;
    margin: 50px auto;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}
.register-link {
    margin-top: 10px;
}
.register-link a {
    color: blue;
    text-decoration: none;
}
input {
    width: 90%;
    padding: 10px;
    margin: 10px 0;
    border: 1px solid #ccc;
    border-radius: 5px;
}
.containerlogin {
    max-width: 1000px;
    max-height: 1000vh  ;
    margin: 100px auto;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}
.btn5{
            display: flex;
            background-color: black;
            color: white;
            border: 2px solid white;
            border-radius: 20px;
            padding: 10px 50px;
            margin: 0 auto;
            gap: 15px;
            font-size: 16px;
            box-sizing: border-box;
            transition: all 0.3s ease;  
            text-align: center;
            justify-content: center;
            outline: none;  /* ลบเส้นใต้ */
            
}
.btn5 a{
  text-decoration: none;
}
.btn5:hover {
    background-color: rgb(255, 255, 255); /* เปลี่ยนพื้นหลังเป็นสีดำเมื่อวางเมาส์ */
    color: rgb(0, 0, 0); /* เปลี่ยนสีข้อความเป็นขาวเมื่อวางเมาส์ */
    border: 2px solid white; /* เปลี่ยนเส้นขอบเป็นสีขาวเมื่อวางเมาส์ */
}
.account-type {
    margin-top: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.register-link {
    margin-top: 10px;
}
.register-link a {
    color: blue;
    text-decoration: none;
}
.btn3 {
    background-color: rgb(255, 254, 254);
    color: white;
    border: 2px solid white;
    border-radius: 10px;
    padding: 5px 5px;
    font-size: 16px;
    outline: none;
    box-sizing: border-box;
    transition: all 0.3s ease;
    width: auto;
  }
  .btn3:hover {
    background-color: #e0a800; /* เปลี่ยนพื้นหลังเป็นสีดำเมื่อวางเมาส์ */
    color: white; /* เปลี่ยนสีข้อความเป็นขาวเมื่อวางเมาส์ */
    border: 2px solid white; /* เปลี่ยนเส้นขอบเป็นสีขาวเมื่อวางเมาส์ */
}
.btn0{
            display: flex;
            background-color: white;
            color: black;
            border: 2px solid black;
            border-radius: 20px;
            padding: 10px 50px;
            margin:  0 auto;
            gap: 15px;
            font-size: 16px;
            box-sizing: border-box;
            transition: all 0.3s ease;
            text-align: center;
            justify-content: center;
            outline: none;  /* ลบเส้นใต้ */
}
.btn0:hover {
    background-color: black; /* เปลี่ยนพื้นหลังเป็นสีดำเมื่อวางเมาส์ */
    color: white; /* เปลี่ยนสีข้อความเป็นขาวเมื่อวางเมาส์ */
    border: 2px solid white; /* เปลี่ยนเส้นขอบเป็นสีขาวเมื่อวางเมาส์ */
}

.img{
  width:1000px;
  border: 2px solid black;
  border-radius: 15px;  
}
.rating {
  display: flex;
  gap: 10px;  /* เว้นระยะระหว่างปุ่มดาว */
  justify-content: center;  /* จัดกลุ่มให้ตรงกลางในแนวนอน */
  align-items: center;     
}

/* สไตล์สำหรับปุ่มดาว */
.rating button {
  background-color: transparent;
  border: none;
  font-size: 2rem;  /* ขนาดของดาว */
  cursor: pointer;
  color: gray;  /* สีดาวเริ่มต้น */
}

/* เมื่อผู้ใช้วางเมาส์บนปุ่มดาว ให้เปลี่ยนสี */
.rating button:hover {
  color: gold;
}

/* สีของดาวที่ถูกเลือก */
.rating button.selected {
  color: gold;
}
.content-wrapper {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 20px;
}
</style>
</head>
<body>
     <!--navbar-->
   <div class="navbar-container">
    <div class="navbar-left">
      <a href="#" style="font-size: 20px">Skillink</a>
      <a href="#">หน้าหลัก </a>
      <a href="#">โพสต์</a>
      <a href="#">Welcome <%= accUsername %>, Your Role is: <%= accRole %></a>
    </div>
    <a href="/logout">
    <button class="btn ">เข้าสู่ระบบ</button></a>
  </div>

  <!--edit Post-->
<div class="search-section">
<h1>Edit Post</h1>
<form action="/update/<%= post.postTitle %>" method="POST" enctype="multipart/form-data" id="edit-post-form">
    
    <div class="volunteer-section">

        <div class="volunteer-list">
    <label>Current Image:</label>
    <% if (post.postImgUrl) { %>
        <div id="image-container">
            <img class="img" src="<%= post.postImgUrl %>" alt="Post Image"  id="post-image">
            <p>
        </div>
        
        <button class="btn0" type="button" id="delete-image-btn" onclick="removeImage('<%= post.postTitle %>')">
            Delete Image
        </button></p>
        <% } else { %>
            <input type="file" name="postImgUrl" accept="image/*" id="image-upload">
            <% } %>

                <br><br>
                <button class="btn" type="submit">Update Post</button>
            </div>
       
        <div class="sidebar">
    <label>Name:</label>
    <input type="text" name="postTitle" value="<%= post.postTitle %>" readonly>
    <p>
    <br><label>Description:</label></br>
    <textarea name="postDesc" required><%= post.postDesc %></textarea>
</p>
        </div>
   
    </form>
</div>

<script>
    async function removeImage(postTitle) {
        try {
            const response = await fetch(`/remove-image/${postTitle}`, { method: "POST" });
            const result = await response.json();

            if (result.success) {
                document.getElementById("image-container").remove();

                // สร้าง input file ใหม่แล้วแทรกลงในฟอร์ม
                const imageUploadInput = document.createElement("input");
                imageUploadInput.type = "file";
                imageUploadInput.name = "postImgUrl";
                imageUploadInput.accept = "image/*";
                imageUploadInput.id = "image-upload";

                const form = document.getElementById("edit-post-form");
                form.insertBefore(imageUploadInput, form.children[form.children.length - 2]);
            } else {
                alert("Failed to remove image.");
            }
        } catch (error) {
            console.error("Error removing image:", error);
        }
    }

</script>
</body>